{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto">
    <h1 class="text-3xl font-bold text-center mb-8">
        <i class="fas fa-edit mr-3"></i>Lager bearbeiten
    </h1>
    <form method="POST" class="bg-gray-800 p-6 rounded-lg" id="editLagerForm">
        <input type="text" name="name" value="{{ lager[1] }}" placeholder="Lager Name" 
               class="w-full p-3 bg-gray-700 rounded border-gray-600 focus:border-blue-500 focus:outline-none mb-4"
               data-autofocus onkeypress="submitFormOnEnter(event, 'editLagerForm')" >
        
        <h3 class="text-lg font-semibold mb-3">System Layout:</h3>
        <div class="mb-4">
            {% set current_system_type = lager[4] if lager|length > 4 and lager[4] else 'personal' %}
            <label class="flex items-center mb-2">
                <input type="radio" name="system_type" value="personal" class="mr-3" {% if current_system_type == 'personal' %}checked{% endif %}>
                <span>Personal (Ausleihe an sich selbst)</span>
            </label>
            <label class="flex items-center">
                <input type="radio" name="system_type" value="institutional" class="mr-3" {% if current_system_type == 'institutional' %}checked{% endif %}>
                <span>Institutional (Ausleihe an andere Personen)</span>
            </label>
        </div>
        
        <h3 class="text-lg font-semibold mb-3">Zugriff gewähren:</h3>
        <div class="space-y-2 mb-6">
            {% set current_access = lager[3].split(',') if lager[3] else [] %}
            {% for user in users %}
            <label class="flex items-center">
                <input type="checkbox" name="access_users" value="{{ user[0] }}" class="mr-3" {% if user[0]|string in current_access %}checked{% endif %}>
                <span>{{ user[1] }} ({{ user[0] }})</span>
            </label>
            {% endfor %}
        </div>
        
        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 p-3 rounded font-semibold transition">
            <i class="fas fa-save mr-2"></i>Speichern
        </button>
    </form>
    <a href="/manage_lager" class="block text-center mt-4 text-gray-400 hover:text-white">
        <i class="fas fa-arrow-left mr-2"></i>Zurück
    </a>
</div>
{% endblock %}
